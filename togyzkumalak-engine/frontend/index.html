<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Togyzkumalak Engine - AI Game</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Background Tech Grid -->
    <div class="tech-grid"></div>
    
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üéÆ</span>
                <h1>–¢–æ“ì—ã–∑ “ö“±–º–∞–ª–∞“õ</h1>
            </div>
            
            <!-- Mode Tabs -->
            <div class="mode-tabs">
                <button class="mode-tab active" data-mode="play">üéØ –ò–≥—Ä–∞—Ç—å</button>
                <button class="mode-tab" data-mode="replays">üìº –†–µ–ø–ª–µ–∏</button>
                <button class="mode-tab" data-mode="training">üß† –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
            </div>
            
            <!-- Statistics in header -->
            <div class="header-stats" id="headerStats">
                <div class="stat-item">
                    <span class="stat-label">ELO:</span>
                    <span class="stat-value" id="currentElo">1500</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ò–≥—Ä—ã:</span>
                    <span class="stat-value" id="totalGames">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ü–æ–±–µ–¥—ã:</span>
                    <span class="stat-value" id="totalWins">0</span>
                </div>
            </div>
        </header>

        <!-- ============================================ -->
        <!-- PLAY MODE -->
        <!-- ============================================ -->
        <main class="main-content" id="playMode">
            <!-- Game Setup Panel (shown initially) -->
            <div id="setupPanel" class="panel setup-panel">
                <h2>üéØ –ù–æ–≤–∞—è –ò–≥—Ä–∞</h2>
                
                <div class="setup-section">
                    <label>–ò–≥—Ä–∞—Ç—å –∑–∞:</label>
                    <div class="color-selector">
                        <button class="color-btn active" data-color="white">
                            ‚ö™ –ë–µ–ª—ã–µ (–ë–∞—Å—Ç–∞—É—à—ã)
                        </button>
                        <button class="color-btn" data-color="black">
                            ‚ö´ –ß—ë—Ä–Ω—ã–µ (“ö–æ—Å—Ç–∞—É—à—ã)
                        </button>
                    </div>
                </div>

                <div class="setup-section">
                    <label>–£—Ä–æ–≤–µ–Ω—å –ò–ò:</label>
                    <div class="level-selector">
                        <button class="level-btn" data-level="1">
                            <span class="level-num">1</span>
                            <span class="level-name">–°–ª—É—á–∞–π–Ω—ã–π</span>
                            <span class="level-elo">~800</span>
                        </button>
                        <button class="level-btn" data-level="2">
                            <span class="level-num">2</span>
                            <span class="level-name">–ù–∞—á–∏–Ω–∞—é—â–∏–π</span>
                            <span class="level-elo">~1200</span>
                        </button>
                        <button class="level-btn active" data-level="3">
                            <span class="level-num">3</span>
                            <span class="level-name">–°—Ä–µ–¥–Ω–∏–π</span>
                            <span class="level-elo">~1500</span>
                        </button>
                        <button class="level-btn" data-level="4">
                            <span class="level-num">4</span>
                            <span class="level-name">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</span>
                            <span class="level-elo">~1800</span>
                        </button>
                        <button class="level-btn" data-level="5">
                            <span class="level-num">5</span>
                            <span class="level-name">–≠–∫—Å–ø–µ—Ä—Ç</span>
                            <span class="level-elo">~2100</span>
                        </button>
                    </div>
                </div>

                <button id="btnStartGame" class="btn btn-primary btn-large">
                    ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –ò–≥—Ä—É
                </button>
            </div>

            <!-- Game Panel (hidden initially) -->
            <div id="gamePanel" class="panel game-panel hidden">
                <!-- Info Bar -->
                <div class="info-bar">
                    <div class="player-info player-black">
                        <div class="player-label">‚ö´ “ö–ê–†–ê (AI)</div>
                        <div class="player-elo" id="aiElo">ELO: 1500</div>
                    </div>
                    <div class="game-status">
                        <div class="turn-indicator" id="turnIndicator">–í–∞—à –•–æ–¥</div>
                        <div class="move-counter" id="moveCounter">–•–æ–¥: 0</div>
                    </div>
                    <div class="player-info player-white">
                        <div class="player-label">‚ö™ –ê“ö (–í—ã)</div>
                        <div class="player-elo" id="playerElo">ELO: 1500</div>
                    </div>
                </div>

                <!-- Board Container - Only Classic View -->
                <div class="board-wrapper classic-active">
                    <canvas id="classicBoard" class="board-classic" width="900" height="450"></canvas>
                </div>

                <!-- Last Move Info -->
                <div class="last-move" id="lastMove">
                    –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ö–æ–¥: -
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button id="btnUndo" class="btn btn-secondary" disabled>‚Ü©Ô∏è –û—Ç–º–µ–Ω–∏—Ç—å</button>
                    <button id="btnNewGame" class="btn btn-secondary">üîÑ –ù–æ–≤–∞—è –ò–≥—Ä–∞</button>
                    <button id="btnResign" class="btn btn-danger">üè≥Ô∏è –°–¥–∞—Ç—å—Å—è</button>
                </div>
            </div>

            <!-- Side Panel -->
            <aside class="side-panel">
                <!-- Move History -->
                <div class="panel history-panel">
                    <h3>üìú –ò—Å—Ç–æ—Ä–∏—è –•–æ–¥–æ–≤</h3>
                    <div class="move-list" id="moveList">
                        <!-- Moves will be added here -->
                    </div>
                </div>

                <!-- Gemini Analysis Panel -->
                <div class="panel analysis-panel">
                    <h3>ü§ñ AI –ê–Ω–∞–ª–∏–∑</h3>
                    <div class="analysis-controls">
                        <button id="btnAnalyze" class="btn btn-small">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button id="btnSuggest" class="btn btn-small">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –•–æ–¥</button>
                    </div>
                    <div class="analysis-content" id="analysisContent">
                        <p class="placeholder">–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç Gemini.</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- ============================================ -->
        <!-- REPLAYS MODE -->
        <!-- ============================================ -->
        <main class="main-content hidden" id="replaysMode">
            <!-- Replay Selector -->
            <div class="panel replay-selector-panel">
                <h2>üìº –ó–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –ü–∞—Ä—Ç–∏–∏ (Gym Simulations)</h2>
                <div class="replay-list" id="replayList">
                    <p class="placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–∞—Ä—Ç–∏–π...</p>
                </div>
            </div>

            <!-- Replay Viewer Wrapper -->
            <div id="replayViewer" class="replay-viewer hidden">
                <!-- Replay Info Bar -->
                <div class="info-bar" style="max-width: 900px; width: 100%;">
                    <div class="player-info player-black">
                        <div class="player-label">‚ö´ “ö–ê–†–ê (Black)</div>
                        <div class="player-elo" id="replayBlackScore">–ö–∞–∑–∞–Ω: 0</div>
                    </div>
                    <div class="game-status">
                        <div class="turn-indicator" id="replayCurrentPlayer">WHITE</div>
                        <div class="move-counter" id="replayStepCounter">–®–∞–≥: 0 / 0</div>
                    </div>
                    <div class="player-info player-white">
                        <div class="player-label">‚ö™ –ê“ö (White)</div>
                        <div class="player-elo" id="replayWhiteScore">–ö–∞–∑–∞–Ω: 0</div>
                    </div>
                </div>

                <!-- Replay Board -->
                <div class="board-wrapper classic-active">
                    <canvas id="replayBoard" class="board-classic" width="900" height="450"></canvas>
                </div>

                <!-- Replay Controls Container -->
                <div class="replay-controls-container">
                    <div class="replay-progress">
                        <div class="progress-bar" id="replayProgressBar">
                            <div class="progress-fill" id="replayProgressFill"></div>
                        </div>
                    </div>

                    <div class="replay-controls">
                        <button id="btnReplayFirst" class="btn btn-secondary">‚èÆ –ù–∞—á–∞–ª–æ</button>
                        <button id="btnReplayPrev" class="btn btn-secondary">‚è™ –ù–∞–∑–∞–¥</button>
                        <button id="btnReplayPlay" class="btn btn-primary">‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏</button>
                        <button id="btnReplayNext" class="btn btn-secondary">‚è© –í–ø–µ—Ä—ë–¥</button>
                        <button id="btnReplayLast" class="btn btn-secondary">‚è≠ –ö–æ–Ω–µ—Ü</button>
                    </div>

                    <div class="speed-control">
                        <label>–°–∫–æ—Ä–æ—Å—Ç—å: </label>
                        <input type="range" id="replaySpeed" min="100" max="2000" value="500">
                        <span id="replaySpeedValue" style="margin-left: 10px;">500ms</span>
                    </div>
                </div>

                <!-- Winner Banner -->
                <div class="winner-banner hidden" id="replayWinnerBanner" style="max-width: 900px; width: 100%;">
                    üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: WHITE (83:57) üèÜ
                </div>

                <!-- Replay Info Panels -->
                <div class="replay-bottom-info">
                    <div class="panel">
                        <h3>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ü–∞—Ä—Ç–∏–∏</h3>
                        <div id="replayInfo" class="replay-info">
                            <p class="placeholder">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—Ç–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
                        </div>
                    </div>
                    <div class="panel">
                        <h3>üîç –ü–æ—Å–ª–µ–¥–Ω–µ–µ –î–µ–π—Å—Ç–≤–∏–µ</h3>
                        <div id="replayLastAction" class="last-action-info">
                            -
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Game Over Modal -->
        <div id="gameOverModal" class="modal hidden">
            <div class="modal-content">
                <h2 id="gameOverTitle">üéâ –ò–≥—Ä–∞ –û–∫–æ–Ω—á–µ–Ω–∞!</h2>
                <div class="game-result" id="gameResult">
                    <p class="winner-text" id="winnerText">–í—ã –ü–æ–±–µ–¥–∏–ª–∏!</p>
                    <p class="score-text" id="scoreText">–°—á—ë—Ç: 82 - 80</p>
                    <p class="elo-change" id="eloChangeText">ELO: +15</p>
                </div>
                <div class="modal-buttons">
                    <button id="btnPlayAgain" class="btn btn-primary">–ò–≥—Ä–∞—Ç—å –°–Ω–æ–≤–∞</button>
                    <button id="btnCloseModal" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- TRAINING MODE -->
        <!-- ============================================ -->
        <main class="main-content hidden" id="trainingMode">
            <!-- Training Configuration Panel -->
            <div class="panel training-config-panel">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
                
                <div class="config-section">
                    <label for="numGames">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä:</label>
                    <input type="number" id="numGames" min="1" max="1000" value="10" class="input-field">
                </div>
                
                <div class="config-section">
                    <label for="epsilon">Epsilon (–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ):</label>
                    <input type="number" id="epsilon" min="0" max="1" step="0.05" value="0.2" class="input-field">
                    <small>0.0 = –∂–∞–¥–Ω—ã–π, 1.0 = —Å–ª—É—á–∞–π–Ω—ã–π</small>
                </div>
                
                <div class="config-section">
                    <label for="hiddenSize">–†–∞–∑–º–µ—Ä —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–ª–æ—è:</label>
                    <input type="number" id="hiddenSize" min="32" max="256" step="32" value="64" class="input-field">
                </div>
                
                <div class="config-section">
                    <label for="modelName">–ò–º—è –º–æ–¥–µ–ª–∏:</label>
                    <input type="text" id="modelName" value="policy_net" class="input-field">
                </div>
                
                <div class="config-section">
                    <label class="checkbox-label">
                        <input type="checkbox" id="saveReplays" checked>
                        <span>–°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–ø–ª–µ–∏ (–ø–µ—Ä–≤—ã–µ 3 –∏–≥—Ä—ã)</span>
                    </label>
                </div>
                
                <button id="btnStartTraining" class="btn btn-primary btn-large">
                    üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
                </button>
            </div>
            
            <!-- Training Progress Panel -->
            <div class="panel training-progress-panel">
                <h2>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
                
                <div id="trainingStatus" class="training-status">
                    <p class="status-text">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞...</p>
                </div>
                
                <div id="trainingProgress" class="progress-container hidden">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="trainingProgressBar"></div>
                    </div>
                    <p class="progress-text" id="trainingProgressText">0 / 10 –∏–≥—Ä</p>
                </div>
                
                <div id="trainingStats" class="training-stats hidden">
                    <div class="stat-row">
                        <span class="stat-label">–ü–æ–±–µ–¥ –±–µ–ª—ã—Ö:</span>
                        <span class="stat-value" id="whiteWins">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–ü–æ–±–µ–¥ —á—ë—Ä–Ω—ã—Ö:</span>
                        <span class="stat-value" id="blackWins">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–ù–∏—á—å–∏:</span>
                        <span class="stat-value" id="draws">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞:</span>
                        <span class="stat-value" id="avgSteps">0</span>
                    </div>
                </div>
                
                <h3>üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ú–æ–¥–µ–ª–∏</h3>
                <div id="modelsList" class="models-list">
                    <p class="empty-text">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π</p>
                </div>
            </div>
            
            <!-- Training Sessions Panel -->
            <div class="panel training-sessions-panel">
                <h2>üìù –ò—Å—Ç–æ—Ä–∏—è –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h2>
                <div id="sessionsList" class="sessions-list">
                    <p class="empty-text">–ù–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π</p>
                </div>
            </div>
        </main>

        <!-- AI Thinking Indicator -->
        <div id="aiThinking" class="thinking-indicator hidden">
            <div class="thinking-spinner"></div>
            <span>–ò–ò –¥—É–º–∞–µ—Ç...</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/board-classic.js"></script>
    <script src="js/app.js"></script>
    <script src="js/replay.js"></script>
    <script src="js/training.js"></script>
</body>
</html>
