<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Togyzkumalak Engine - AI Game</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Background Tech Grid -->
    <div class="tech-grid"></div>
    
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üéÆ</span>
                <h1>–¢–æ“ì—ã–∑ “ö“±–º–∞–ª–∞“õ</h1>
            </div>
            
            <!-- Mode Tabs -->
            <div class="mode-tabs">
                <button class="mode-tab active" data-mode="play">üéØ –ò–≥—Ä–∞—Ç—å</button>
                <button class="mode-tab" data-mode="replays">üìº –†–µ–ø–ª–µ–∏</button>
                <button class="mode-tab" data-mode="training">üß† –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
                <button class="mode-tab" data-mode="gemini-battle">ü§ñ Gemini Battle</button>
                <button class="mode-tab" data-mode="analytics">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
            </div>
            
            <!-- Statistics in header -->
            <div class="header-stats" id="headerStats">
                <div class="stat-item">
                    <span class="stat-label">ELO:</span>
                    <span class="stat-value" id="currentElo">1500</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ò–≥—Ä—ã:</span>
                    <span class="stat-value" id="totalGames">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ü–æ–±–µ–¥—ã:</span>
                    <span class="stat-value" id="totalWins">0</span>
                </div>
            </div>
        </header>

        <!-- ============================================ -->
        <!-- PLAY MODE -->
        <!-- ============================================ -->
        <main class="main-content" id="playMode">
            <!-- Game Setup Panel (shown initially) -->
            <div id="setupPanel" class="panel setup-panel">
                <h2>üéØ –ù–æ–≤–∞—è –ò–≥—Ä–∞</h2>
                
                <div class="setup-section">
                    <label>–ò–≥—Ä–∞—Ç—å –∑–∞:</label>
                    <div class="color-selector">
                        <button class="color-btn active" data-color="white">
                            ‚ö™ –ë–µ–ª—ã–µ (–ë–∞—Å—Ç–∞—É—à—ã)
                        </button>
                        <button class="color-btn" data-color="black">
                            ‚ö´ –ß—ë—Ä–Ω—ã–µ (“ö–æ—Å—Ç–∞—É—à—ã)
                        </button>
                    </div>
                </div>

                <div class="setup-section">
                    <label>–£—Ä–æ–≤–µ–Ω—å –ò–ò:</label>
                    <div class="level-selector">
                        <button class="level-btn" data-level="1">
                            <span class="level-num">1</span>
                            <span class="level-name">–°–ª—É—á–∞–π–Ω—ã–π</span>
                            <span class="level-elo">~800</span>
                        </button>
                        <button class="level-btn" data-level="2">
                            <span class="level-num">2</span>
                            <span class="level-name">–ù–∞—á–∏–Ω–∞—é—â–∏–π</span>
                            <span class="level-elo">~1200</span>
                        </button>
                        <button class="level-btn active" data-level="3">
                            <span class="level-num">3</span>
                            <span class="level-name">–°—Ä–µ–¥–Ω–∏–π</span>
                            <span class="level-elo">~1500</span>
                        </button>
                        <button class="level-btn" data-level="4">
                            <span class="level-num">4</span>
                            <span class="level-name">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</span>
                            <span class="level-elo">~1800</span>
                        </button>
                        <button class="level-btn" data-level="5">
                            <span class="level-num">5</span>
                            <span class="level-name">–≠–∫—Å–ø–µ—Ä—Ç</span>
                            <span class="level-elo">~2100</span>
                        </button>
                    </div>
                </div>

                <button id="btnStartGame" class="btn btn-primary btn-large">
                    ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –ò–≥—Ä—É
                </button>
            </div>

            <!-- Game Panel (hidden initially) -->
            <div id="gamePanel" class="panel game-panel hidden">
                <!-- Info Bar -->
                <div class="info-bar">
                    <div class="player-info player-black">
                        <div class="player-label">‚ö´ “ö–ê–†–ê (AI)</div>
                        <div class="player-elo" id="aiElo">ELO: 1500</div>
                    </div>
                    <div class="game-status">
                        <div class="turn-indicator" id="turnIndicator">–í–∞—à –•–æ–¥</div>
                        <div class="move-counter" id="moveCounter">–•–æ–¥: 0</div>
                    </div>
                    <div class="player-info player-white">
                        <div class="player-label">‚ö™ –ê“ö (–í—ã)</div>
                        <div class="player-elo" id="playerElo">ELO: 1500</div>
                    </div>
                </div>

                <!-- Board Container - Only Classic View -->
                <div class="board-wrapper classic-active">
                    <canvas id="classicBoard" class="board-classic" width="900" height="450"></canvas>
                </div>

                <!-- Last Move Info -->
                <div class="last-move" id="lastMove">
                    –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ö–æ–¥: -
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button id="btnUndo" class="btn btn-secondary" disabled>‚Ü©Ô∏è –û—Ç–º–µ–Ω–∏—Ç—å</button>
                    <button id="btnNewGame" class="btn btn-secondary">üîÑ –ù–æ–≤–∞—è –ò–≥—Ä–∞</button>
                    <button id="btnResign" class="btn btn-danger">üè≥Ô∏è –°–¥–∞—Ç—å—Å—è</button>
                </div>
            </div>

            <!-- Side Panel -->
            <aside class="side-panel">
                <!-- Move History -->
                <div class="panel history-panel">
                    <h3>üìú –ò—Å—Ç–æ—Ä–∏—è –•–æ–¥–æ–≤</h3>
                    <div class="move-list" id="moveList">
                        <!-- Moves will be added here -->
                    </div>
                </div>

                <!-- Gemini Analysis Panel -->
                <div class="panel analysis-panel">
                    <h3>ü§ñ AI –ê–Ω–∞–ª–∏–∑</h3>
                    <div class="analysis-controls">
                        <button id="btnAnalyze" class="btn btn-small">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button id="btnSuggest" class="btn btn-small">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –•–æ–¥</button>
                    </div>
                    <div class="analysis-content" id="analysisContent">
                        <p class="placeholder">–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç Gemini.</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- ============================================ -->
        <!-- REPLAYS MODE -->
        <!-- ============================================ -->
        <main class="main-content hidden" id="replaysMode">
            <!-- Replay Selector -->
            <div class="panel replay-selector-panel">
                <h2>üìº –ó–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –ü–∞—Ä—Ç–∏–∏ (Gym Simulations)</h2>
                <div class="replay-list" id="replayList">
                    <p class="placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–∞—Ä—Ç–∏–π...</p>
                </div>
                
                <!-- Gemini Battle Replays Section -->
                <h3 style="margin-top: 24px; color: var(--accent-secondary);">ü§ñ –ë–∞—Ç–ª—ã –ø—Ä–æ—Ç–∏–≤ Gemini</h3>
                <div class="replay-list" id="geminiBattleReplayList">
                    <p class="placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä –ø—Ä–æ—Ç–∏–≤ Gemini...</p>
                </div>
            </div>

            <!-- Replay Viewer Wrapper -->
            <div id="replayViewer" class="replay-viewer hidden">
                <!-- Replay Info Bar -->
                <div class="info-bar" style="max-width: 900px; width: 100%;">
                    <div class="player-info player-black">
                        <div class="player-label">‚ö´ “ö–ê–†–ê (Black)</div>
                        <div class="player-elo" id="replayBlackScore">–ö–∞–∑–∞–Ω: 0</div>
                    </div>
                    <div class="game-status">
                        <div class="turn-indicator" id="replayCurrentPlayer">WHITE</div>
                        <div class="move-counter" id="replayStepCounter">–®–∞–≥: 0 / 0</div>
                    </div>
                    <div class="player-info player-white">
                        <div class="player-label">‚ö™ –ê“ö (White)</div>
                        <div class="player-elo" id="replayWhiteScore">–ö–∞–∑–∞–Ω: 0</div>
                    </div>
                </div>

                <!-- Replay Board -->
                <div class="board-wrapper classic-active">
                    <canvas id="replayBoard" class="board-classic" width="900" height="450"></canvas>
                </div>

                <!-- Replay Controls Container -->
                <div class="replay-controls-container">
                    <div class="replay-progress">
                        <div class="progress-bar" id="replayProgressBar">
                            <div class="progress-fill" id="replayProgressFill"></div>
                        </div>
                    </div>

                    <div class="replay-controls">
                        <button id="btnReplayFirst" class="btn btn-secondary">‚èÆ –ù–∞—á–∞–ª–æ</button>
                        <button id="btnReplayPrev" class="btn btn-secondary">‚è™ –ù–∞–∑–∞–¥</button>
                        <button id="btnReplayPlay" class="btn btn-primary">‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏</button>
                        <button id="btnReplayNext" class="btn btn-secondary">‚è© –í–ø–µ—Ä—ë–¥</button>
                        <button id="btnReplayLast" class="btn btn-secondary">‚è≠ –ö–æ–Ω–µ—Ü</button>
                    </div>

                    <div class="speed-control">
                        <label>–°–∫–æ—Ä–æ—Å—Ç—å: </label>
                        <input type="range" id="replaySpeed" min="100" max="2000" value="500">
                        <span id="replaySpeedValue" style="margin-left: 10px;">500ms</span>
                    </div>
                </div>

                <!-- Winner Banner -->
                <div class="winner-banner hidden" id="replayWinnerBanner" style="max-width: 900px; width: 100%;">
                    üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: WHITE (83:57) üèÜ
                </div>

                <!-- Replay Info Panels -->
                <div class="replay-bottom-info">
                    <div class="panel">
                        <h3>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ü–∞—Ä—Ç–∏–∏</h3>
                        <div id="replayInfo" class="replay-info">
                            <p class="placeholder">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—Ç–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
                        </div>
                    </div>
                    <div class="panel">
                        <h3>üîç –ü–æ—Å–ª–µ–¥–Ω–µ–µ –î–µ–π—Å—Ç–≤–∏–µ</h3>
                        <div id="replayLastAction" class="last-action-info">
                            -
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Game Over Modal -->
        <div id="gameOverModal" class="modal hidden">
            <div class="modal-content">
                <h2 id="gameOverTitle">üéâ –ò–≥—Ä–∞ –û–∫–æ–Ω—á–µ–Ω–∞!</h2>
                <div class="game-result" id="gameResult">
                    <p class="winner-text" id="winnerText">–í—ã –ü–æ–±–µ–¥–∏–ª–∏!</p>
                    <p class="score-text" id="scoreText">–°—á—ë—Ç: 82 - 80</p>
                    <p class="elo-change" id="eloChangeText">ELO: +15</p>
                </div>
                <div class="modal-buttons">
                    <button id="btnPlayAgain" class="btn btn-primary">–ò–≥—Ä–∞—Ç—å –°–Ω–æ–≤–∞</button>
                    <button id="btnCloseModal" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- TRAINING MODE -->
        <!-- ============================================ -->
        <main class="main-content hidden" id="trainingMode">
            <!-- Training Data Panel -->
            <div class="panel training-data-panel">
                <h2>üìÇ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ –î–∞–Ω–Ω—ã–µ</h2>
                <p class="panel-description">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏</p>
                
                <div class="data-stats-grid" id="trainingDataStats">
                    <div class="data-stat-card">
                        <div class="stat-icon">üìö</div>
                        <div class="stat-value" id="statOpeningBook">0</div>
                        <div class="stat-label">–î–µ–±—é—Ç–Ω–∞—è –∫–Ω–∏–≥–∞</div>
                    </div>
                    <div class="data-stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-value" id="statTournament">0</div>
                        <div class="stat-label">–¢—É—Ä–Ω–∏—Ä—ã</div>
                    </div>
                    <div class="data-stat-card">
                        <div class="stat-icon">üéÆ</div>
                        <div class="stat-value" id="statPlayOK">0</div>
                        <div class="stat-label">PlayOK</div>
                    </div>
                    <div class="data-stat-card highlight">
                        <div class="stat-icon">Œ£</div>
                        <div class="stat-value" id="statTotalGamesData">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä</div>
                    </div>
                    <div class="data-stat-card">
                        <div class="stat-icon">‚ÜîÔ∏è</div>
                        <div class="stat-value" id="statTransitions">0</div>
                        <div class="stat-label">–ü–µ—Ä–µ—Ö–æ–¥–æ–≤</div>
                    </div>
                </div>
                
                <div class="data-files-section">
                    <h3>üìÅ –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö</h3>
                    <div id="dataFilesList" class="data-files-list">
                        <p class="empty-text">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                    </div>
                </div>
                
                <div class="data-actions">
                    <button id="btnParseData" class="btn btn-secondary">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
                    </button>
                    <button id="btnTrainOnHuman" class="btn btn-primary btn-large">
                        üéì –î–æ–æ–±—É—á–∏—Ç—å –Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
                    </button>
                </div>
                
                <div id="humanTrainingProgress" class="human-training-progress hidden">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="humanTrainingBar"></div>
                    </div>
                    <p class="progress-text" id="humanTrainingText">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...</p>
                </div>
                
                <!-- FAQ Section - Collapsible Accordion -->
                <div class="training-faq-section">
                    <button class="faq-toggle-btn" id="faqToggleBtn">
                        ‚ùì FAQ –¥–ª—è –Ω–æ–≤–∏—á–∫–∞ <span class="toggle-icon">‚ñº</span>
                    </button>
                    <div class="faq-accordion-content" id="faqContent">
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">üîÑ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç "–û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥"? <span class="expand-icon">+</span></div>
                            <div class="faq-a">–°–æ–±–∏—Ä–∞–µ—Ç –∏–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ 3 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:<br>
                            ‚Ä¢ <b>–î–µ–±—é—Ç–Ω–∞—è –∫–Ω–∏–≥–∞</b> (open_tree*.txt) - ~21 –∏–≥—Ä–∞<br>
                            ‚Ä¢ <b>–¢—É—Ä–Ω–∏—Ä—ã</b> (games.txt) - ~237 –∏–≥—Ä —á–µ–º–ø–∏–æ–Ω–∞—Ç–æ–≤<br>
                            ‚Ä¢ <b>PlayOK</b> (all_results_combined.txt) - ~2100 –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä<br>
                            –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø–∞–ø–∫—É <code>training_data/</code></div>
                        </div>
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">üéì –ß—Ç–æ –¥–µ–ª–∞–µ—Ç "–î–æ–æ–±—É—á–∏—Ç—å"? <span class="expand-icon">+</span></div>
                            <div class="faq-a"><b>Behavioral Cloning</b> - –Ω–µ–π—Ä–æ—Å–µ—Ç—å —É—á–∏—Ç—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å —Ö–æ–¥—ã –ª—é–¥–µ–π.<br>
                            <b>–û–∂–∏–¥–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞ 50 —ç–ø–æ—Ö:</b><br>
                            ‚Ä¢ Loss: 2.2 ‚Üí 0.8 (–¥–æ–ª–∂–µ–Ω –ø–∞–¥–∞—Ç—å)<br>
                            ‚Ä¢ Accuracy: 11% ‚Üí 40-50% (–¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Ç–∏)<br>
                            <b>–í—Ä–µ–º—è:</b> ~5-15 –º–∏–Ω—É—Ç –Ω–∞ 246K –ø—Ä–∏–º–µ—Ä–∞—Ö.</div>
                        </div>
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">üìä Accuracy 17% —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ? <span class="expand-icon">+</span></div>
                            <div class="faq-a"><b>–ü–æ—Å–ª–µ 10 —ç–ø–æ—Ö</b> - –¥–∞, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!<br>
                            ‚Ä¢ –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä = 11% (9 —Ö–æ–¥–æ–≤)<br>
                            ‚Ä¢ 17% = –º–æ–¥–µ–ª—å —É–∂–µ –ª—É—á—à–µ —Å–ª—É—á–∞–π–Ω–æ–π<br>
                            ‚Ä¢ <b>–ù—É–∂–Ω–æ 50+ —ç–ø–æ—Ö</b> –¥–ª—è 40-50%<br>
                            ‚Ä¢ –ò–¥–µ–∞–ª: 50-60% (–ª—é–¥–∏ —Ç–æ–∂–µ –æ—à–∏–±–∞—é—Ç—Å—è)</div>
                        </div>
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">üéÆ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å —Å –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª—å—é? <span class="expand-icon">+</span></div>
                            <div class="faq-a">1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É <b>üéØ –ò–≥—Ä–∞—Ç—å</b><br>
                            2. –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å <b>5 (–≠–∫—Å–ø–µ—Ä—Ç)</b><br>
                            3. –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!<br>
                            <i>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–¥–µ–ª—å –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–Ω–æ–≤–æ.</i></div>
                        </div>
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">üîÑ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Self-Play? <span class="expand-icon">+</span></div>
                            <div class="faq-a">1. –ù–∞ —ç—Ç–æ–π –∂–µ –≤–∫–ª–∞–¥–∫–µ —Å–ø—Ä–∞–≤–∞ - <b>Self-Play –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</b><br>
                            2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ 100-500 –∏–≥—Ä<br>
                            3. –ù–∞–∂–º–∏—Ç–µ <b>üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å Self-Play</b><br>
                            –ú–æ–¥–µ–ª—å –∏–≥—Ä–∞–µ—Ç —Å–∞–º–∞ —Å —Å–æ–±–æ–π –∏ —É–ª—É—á—à–∞–µ—Ç—Å—è!</div>
                        </div>
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">ü§ñ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å –ø—Ä–æ—Ç–∏–≤ Gemini? <span class="expand-icon">+</span></div>
                            <div class="faq-a">1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É <b>ü§ñ Gemini Battle</b><br>
                            2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä (10-50)<br>
                            3. –ù–∞–∂–º–∏—Ç–µ <b>‚öîÔ∏è –ù–∞—á–∞—Ç—å –ë–∞—Ç–ª</b><br>
                            ELO —Ä–µ–π—Ç–∏–Ω–≥ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!</div>
                        </div>
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">üìÅ –ì–¥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–æ–¥–µ–ª–∏? <span class="expand-icon">+</span></div>
                            <div class="faq-a">–í –ø–∞–ø–∫–µ <code>models/</code>:<br>
                            ‚Ä¢ <code>policy_net_human_v1.pt</code> - –ø–æ—Å–ª–µ 1-–≥–æ –æ–±—É—á–µ–Ω–∏—è<br>
                            ‚Ä¢ <code>policy_net_human_v2.pt</code> - –ø–æ—Å–ª–µ 2-–≥–æ –∏ —Ç.–¥.<br>
                            –í–µ—Ä—Å–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!</div>
                        </div>
                        <div class="faq-item" onclick="this.classList.toggle('open')">
                            <div class="faq-q">‚ö†Ô∏è "–ù–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π" - —ç—Ç–æ –æ–∫? <span class="expand-icon">+</span></div>
                            <div class="faq-a"><b>–î–∞!</b> –≠—Ç–∞ —Å–µ–∫—Ü–∏—è –¥–ª—è <b>Self-Play</b> —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫.<br>
                            –î–æ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö - –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å.<br>
                            –ó–∞–ø—É—Å—Ç–∏—Ç–µ Self-Play —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–µ—Å—Å–∏–∏ –∑–¥–µ—Å—å.</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Training Configuration Panel -->
            <div class="panel training-config-panel">
                <h2>‚öôÔ∏è Self-Play –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</h2>
                
                <div class="config-section">
                    <label for="numGames">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä:</label>
                    <input type="number" id="numGames" min="1" max="1000" value="10" class="input-field">
                </div>
                
                <div class="config-section">
                    <label for="epsilon">Epsilon (–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ):</label>
                    <input type="number" id="epsilon" min="0" max="1" step="0.05" value="0.2" class="input-field">
                    <small>0.0 = –∂–∞–¥–Ω—ã–π, 1.0 = —Å–ª—É—á–∞–π–Ω—ã–π</small>
                </div>
                
                <div class="config-section">
                    <label for="hiddenSize">–†–∞–∑–º–µ—Ä —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–ª–æ—è:</label>
                    <input type="number" id="hiddenSize" min="32" max="256" step="32" value="64" class="input-field">
                </div>
                
                <div class="config-section">
                    <label for="modelName">–ò–º—è –º–æ–¥–µ–ª–∏:</label>
                    <input type="text" id="modelName" value="policy_net" class="input-field">
                </div>
                
                <div class="config-section">
                    <label class="checkbox-label">
                        <input type="checkbox" id="saveReplays" checked>
                        <span>–°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–ø–ª–µ–∏ (–ø–µ—Ä–≤—ã–µ 3 –∏–≥—Ä—ã)</span>
                    </label>
                </div>
                
                <button id="btnStartTraining" class="btn btn-primary btn-large">
                    üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å Self-Play
                </button>
            </div>
            
            <!-- Training Progress Panel -->
            <div class="panel training-progress-panel">
                <h2>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
                
                <div id="trainingStatus" class="training-status">
                    <p class="status-text">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞...</p>
                </div>
                
                <div id="trainingProgress" class="progress-container hidden">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="trainingProgressBar"></div>
                    </div>
                    <p class="progress-text" id="trainingProgressText">0 / 10 –∏–≥—Ä</p>
                </div>
                
                <div id="trainingStats" class="training-stats hidden">
                    <div class="stat-row">
                        <span class="stat-label">–ü–æ–±–µ–¥ –±–µ–ª—ã—Ö:</span>
                        <span class="stat-value" id="whiteWins">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–ü–æ–±–µ–¥ —á—ë—Ä–Ω—ã—Ö:</span>
                        <span class="stat-value" id="blackWins">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–ù–∏—á—å–∏:</span>
                        <span class="stat-value" id="draws">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞:</span>
                        <span class="stat-value" id="avgSteps">0</span>
                    </div>
                </div>
                
                <h3>üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ú–æ–¥–µ–ª–∏</h3>
                <div id="modelsList" class="models-list">
                    <p class="empty-text">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π</p>
                </div>
            </div>
            
            <!-- Training Sessions Panel -->
            <div class="panel training-sessions-panel">
                <h2>üìù –ò—Å—Ç–æ—Ä–∏—è –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h2>
                <div id="sessionsList" class="sessions-list">
                    <p class="empty-text">–ù–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π</p>
                </div>
            </div>
        </main>

        <!-- ============================================ -->
        <!-- GEMINI BATTLE MODE -->
        <!-- ============================================ -->
        <main class="main-content hidden" id="geminiBattleMode">
            <!-- Battle Configuration Panel -->
            <div class="panel battle-config-panel">
                <h2>‚öîÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–∞—Ç–ª–∞ vs Gemini</h2>
                
                <div class="config-section">
                    <label for="battleNumGames">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä:</label>
                    <input type="number" id="battleNumGames" min="1" max="100" value="10" class="input-field">
                    <small>–ú–æ–¥–µ–ª—å –∏–≥—Ä–∞–µ—Ç –∑–∞ –±–µ–ª—ã—Ö –∏ –∑–∞ —á—ë—Ä–Ω—ã—Ö –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ</small>
                </div>
                
                <div class="config-section">
                    <label for="battleModelLevel">–£—Ä–æ–≤–µ–Ω—å –º–æ–¥–µ–ª–∏ (1-5):</label>
                    <input type="number" id="battleModelLevel" min="1" max="5" value="5" class="input-field">
                </div>
                
                <div class="config-section">
                    <label for="battleTimeout">–¢–∞–π–º–∞—É—Ç Gemini (—Å–µ–∫):</label>
                    <input type="number" id="battleTimeout" min="10" max="120" value="30" class="input-field">
                </div>
                
                <div class="config-section">
                    <label class="checkbox-label">
                        <input type="checkbox" id="battleSaveReplays" checked>
                        <span>–°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–ø–ª–µ–∏ –∏–≥—Ä</span>
                    </label>
                </div>
                
                <div class="config-section">
                    <label class="checkbox-label">
                        <input type="checkbox" id="battleGenerateSummaries" checked>
                        <span>–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—é–º–µ –∏–≥—Ä (–¥–ª—è LLM)</span>
                    </label>
                </div>
                
                <button id="btnStartBattle" class="btn btn-primary btn-large">
                    ‚öîÔ∏è –ù–∞—á–∞—Ç—å –ë–∞—Ç–ª
                </button>
            </div>
            
            <!-- Battle Progress Panel -->
            <div class="panel battle-progress-panel">
                <h2>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ë–∞—Ç–ª–∞</h2>
                
                <div id="battleStatus" class="battle-status">
                    <p class="status-text">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞...</p>
                </div>
                
                <div id="battleProgress" class="progress-container hidden">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="battleProgressBar"></div>
                    </div>
                    <p class="progress-text" id="battleProgressText">0 / 10 –∏–≥—Ä</p>
                </div>
                
                <div id="battleStats" class="battle-stats hidden">
                    <div class="stat-row highlight">
                        <span class="stat-label">ELO –ú–æ–¥–µ–ª–∏:</span>
                        <span class="stat-value" id="modelElo">1500</span>
                        <span class="stat-category" id="modelCategory">(–ö–ª—É–±–Ω—ã–π –∏–≥—Ä–æ–∫)</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–ü–æ–±–µ–¥ –º–æ–¥–µ–ª–∏:</span>
                        <span class="stat-value win" id="battleModelWins">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–ü–æ–±–µ–¥ Gemini:</span>
                        <span class="stat-value loss" id="battleGeminiWins">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">–ù–∏—á—å–∏:</span>
                        <span class="stat-value" id="battleDraws">0</span>
                    </div>
                </div>
                
                <button id="btnStopBattle" class="btn btn-danger hidden">
                    ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–∞—Ç–ª
                </button>
            </div>
            
            <!-- ELO Chart Panel -->
            <div class="panel battle-chart-panel">
                <h2>üìà –ì—Ä–∞—Ñ–∏–∫ ELO –†–µ–π—Ç–∏–Ω–≥–∞</h2>
                <div class="chart-container">
                    <canvas id="eloChart" width="600" height="300"></canvas>
                </div>
                <div class="elo-legend">
                    <div class="legend-item"><span class="legend-line gm"></span> –ì—Ä–æ—Å—Å–º–µ–π—Å—Ç–µ—Ä (2400+)</div>
                    <div class="legend-item"><span class="legend-line im"></span> –ú–ú (2200)</div>
                    <div class="legend-item"><span class="legend-line master"></span> –ú–∞—Å—Ç–µ—Ä (2000)</div>
                    <div class="legend-item"><span class="legend-line cm"></span> –ö–ú–° (1800)</div>
                    <div class="legend-item"><span class="legend-line club"></span> –ö–ª—É–±–Ω—ã–π (1400)</div>
                </div>
            </div>
            
            <!-- Last Game Summary Panel -->
            <div class="panel battle-summary-panel">
                <h2>üìù –†–µ–∑—é–º–µ –ü–æ—Å–ª–µ–¥–Ω–µ–π –ò–≥—Ä—ã</h2>
                <div id="lastGameSummary" class="game-summary">
                    <p class="placeholder">–†–µ–∑—é–º–µ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã...</p>
                </div>
            </div>
            
            <!-- Battle Sessions History -->
            <div class="panel battle-sessions-panel">
                <h2>üìú –ò—Å—Ç–æ—Ä–∏—è –ë–∞—Ç–ª–æ–≤</h2>
                <div id="battleSessionsList" class="sessions-list">
                    <p class="empty-text">–ù–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –±–∞—Ç–ª–æ–≤</p>
                </div>
            </div>
        </main>

        <!-- ============================================ -->
        <!-- ANALYTICS MODE - REAL DATA ONLY -->
        <!-- ============================================ -->
        <main class="main-content hidden" id="analyticsMode">
            <!-- Controls Panel -->
            <div class="panel analytics-controls-panel">
                <h2>üìä –†–µ–∞–ª—å–Ω—ã–µ –ú–µ—Ç—Ä–∏–∫–∏</h2>
                <p class="panel-description">–í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–≥—Ä. –ù–∏–∫–∞–∫–∏—Ö –º–æ–∫–æ–≤.</p>
                
                <div class="controls-row">
                    <button id="btnRefreshMetrics" class="btn btn-primary">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <button id="btnAutoRefresh" class="btn btn-secondary">
                        ‚ñ∂Ô∏è –ê–≤—Ç–æ
                    </button>
                    <button id="btnSyncWandB" class="btn btn-secondary">
                        ‚òÅÔ∏è –°–∏–Ω—Ö—Ä. W&B
                    </button>
                    <span id="metricsTimestamp" class="timestamp">–û–∂–∏–¥–∞–Ω–∏–µ...</span>
                </div>
            </div>
            
            <!-- Gemini Battle Stats Panel -->
            <div class="panel analytics-stats-panel">
                <h2>‚öîÔ∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Gemini Battles</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="statTotalGames">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä</div>
                    </div>
                    <div class="stat-card win">
                        <div class="stat-value" id="statModelWins">0</div>
                        <div class="stat-label">–ü–æ–±–µ–¥ –º–æ–¥–µ–ª–∏</div>
                    </div>
                    <div class="stat-card loss">
                        <div class="stat-value" id="statGeminiWins">0</div>
                        <div class="stat-label">–ü–æ–±–µ–¥ Gemini</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statDraws">0</div>
                        <div class="stat-label">–ù–∏—á—å–∏—Ö</div>
                    </div>
                    <div class="stat-card highlight">
                        <div class="stat-value" id="statWinrate">0%</div>
                        <div class="stat-label">Winrate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statAvgGameLength">0</div>
                        <div class="stat-label">–°—Ä. –¥–ª–∏–Ω–∞ –∏–≥—Ä—ã</div>
                    </div>
                </div>
            </div>
            
            <!-- ELO Panel -->
            <div class="panel analytics-elo-panel">
                <h2>üèÜ ELO –†–µ–π—Ç–∏–Ω–≥</h2>
                <div class="elo-display">
                    <div class="elo-main">
                        <span class="elo-value" id="currentElo">1500</span>
                        <span class="elo-change" id="lastEloChange">+0</span>
                    </div>
                    <div class="elo-category" id="eloCategory">–ù–∞—á–∏–Ω–∞—é—â–∏–π</div>
                </div>
                <div class="elo-details">
                    <div class="detail-row">
                        <span>–ü–∏–∫:</span>
                        <span id="peakElo">1500</span>
                    </div>
                    <div class="detail-row">
                        <span>–ò–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ:</span>
                        <span id="eloTotalGames">0</span>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="eloProgressChart" height="200"></canvas>
                </div>
            </div>
            
            <!-- Dataset Panel -->
            <div class="panel analytics-dataset-panel">
                <h2>üìö –î–∞—Ç–∞—Å–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è</h2>
                <div class="dataset-composition">
                    <div class="composition-bar">
                        <div class="bar-segment gemini" id="barGemini" style="width: 0%"></div>
                        <div class="bar-segment self-play" id="barSelfPlay" style="width: 0%"></div>
                        <div class="bar-segment human" id="barHuman" style="width: 0%"></div>
                    </div>
                    <div class="composition-legend">
                        <span class="legend-item gemini">Gemini</span>
                        <span class="legend-item self-play">Self-Play</span>
                        <span class="legend-item human">–¢—É—Ä–Ω–∏—Ä—ã</span>
                    </div>
                </div>
                <div class="dataset-stats">
                    <div class="stat-row">
                        <span>Gemini –∏–≥—Ä:</span>
                        <span id="datasetGeminiGames">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Self-Play –∏–≥—Ä:</span>
                        <span id="datasetSelfPlayGames">0</span>
                    </div>
                    <div class="stat-row">
                        <span>–í—Å–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:</span>
                        <span id="datasetTotalTransitions">0</span>
                    </div>
                    <div class="stat-row">
                        <span>–†–∞–∑–º–µ—Ä –Ω–∞ –¥–∏—Å–∫–µ:</span>
                        <span id="datasetDiskSize">0 MB</span>
                    </div>
                </div>
            </div>
            
            <!-- Convergence Panel -->
            <div class="panel analytics-convergence-panel">
                <h2>üìà –°—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è</h2>
                <div class="convergence-display">
                    <div class="convergence-status" id="convergenceStatus">‚ùì –ú–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö</div>
                    <div class="convergence-metrics">
                        <div class="metric-row">
                            <span>–î–∏—Å–ø–µ—Ä—Å–∏—è:</span>
                            <span id="convergenceVariance">N/A</span>
                        </div>
                        <div class="metric-row">
                            <span>–¢—Ä–µ–Ω–¥:</span>
                            <span id="convergenceTrend">N/A</span>
                        </div>
                    </div>
                    <p class="recommendation" id="convergenceRecommendation">
                        –ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
                    </p>
                </div>
            </div>
            
            <!-- A/B Testing Panel -->
            <div class="panel analytics-ab-panel">
                <h2>üß™ A/B –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Schema</h2>
                <p class="panel-description">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Gemini</p>
                
                <button id="btnCreateExperiment" class="btn btn-secondary">
                    ‚ûï –°–æ–∑–¥–∞—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç
                </button>
                
                <div id="experimentsList" class="experiments-list">
                    <p class="empty-text">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤</p>
                </div>
            </div>
            
            <!-- Recent Games Panel -->
            <div class="panel analytics-recent-panel">
                <h2>üïê –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã</h2>
                <div id="recentGamesList" class="recent-games-list">
                    <p class="empty-text">–ù–µ—Ç —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –∏–≥—Ä</p>
                </div>
            </div>
        </main>

        <!-- AI Thinking Indicator -->
        <div id="aiThinking" class="thinking-indicator hidden">
            <div class="thinking-spinner"></div>
            <span>–ò–ò –¥—É–º–∞–µ—Ç...</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/api.js"></script>
    <script src="js/board-classic.js"></script>
    <script src="js/app.js"></script>
    <script src="js/replay.js"></script>
    <script src="js/training.js"></script>
    <script src="js/gemini-battle.js"></script>
    <script src="js/analytics.js"></script>
</body>
</html>
