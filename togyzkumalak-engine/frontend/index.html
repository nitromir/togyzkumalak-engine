<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Togyzkumalak Engine - AI Game</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üéÆ</span>
                <h1>–¢–æ“ì—ã–∑ “ö“±–º–∞–ª–∞“õ</h1>
            </div>
            
            <!-- Mode Tabs -->
            <div class="mode-tabs">
                <button class="mode-tab active" data-mode="play">üéØ –ò–≥—Ä–∞—Ç—å</button>
                <button class="mode-tab" data-mode="replays">üìº –†–µ–ø–ª–µ–∏</button>
            </div>
            
            <!-- Statistics in header -->
            <div class="header-stats" id="headerStats">
                <div class="stat-item">
                    <span class="stat-label">ELO:</span>
                    <span class="stat-value" id="currentElo">1500</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ò–≥—Ä—ã:</span>
                    <span class="stat-value" id="totalGames">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ü–æ–±–µ–¥—ã:</span>
                    <span class="stat-value" id="totalWins">0</span>
                </div>
            </div>
        </header>

        <!-- ============================================ -->
        <!-- PLAY MODE -->
        <!-- ============================================ -->
        <main class="main-content" id="playMode">
            <!-- Game Setup Panel (shown initially) -->
            <div id="setupPanel" class="panel setup-panel">
                <h2>üéØ –ù–æ–≤–∞—è –ò–≥—Ä–∞</h2>
                
                <div class="setup-section">
                    <label>–ò–≥—Ä–∞—Ç—å –∑–∞:</label>
                    <div class="color-selector">
                        <button class="color-btn active" data-color="white">
                            ‚ö™ –ë–µ–ª—ã–µ (–ë–∞—Å—Ç–∞—É—à—ã)
                        </button>
                        <button class="color-btn" data-color="black">
                            ‚ö´ –ß—ë—Ä–Ω—ã–µ (“ö–æ—Å—Ç–∞—É—à—ã)
                        </button>
                    </div>
                </div>

                <div class="setup-section">
                    <label>–£—Ä–æ–≤–µ–Ω—å –ò–ò:</label>
                    <div class="level-selector">
                        <button class="level-btn" data-level="1">
                            <span class="level-num">1</span>
                            <span class="level-name">–°–ª—É—á–∞–π–Ω—ã–π</span>
                            <span class="level-elo">~800</span>
                        </button>
                        <button class="level-btn" data-level="2">
                            <span class="level-num">2</span>
                            <span class="level-name">–ù–∞—á–∏–Ω–∞—é—â–∏–π</span>
                            <span class="level-elo">~1200</span>
                        </button>
                        <button class="level-btn active" data-level="3">
                            <span class="level-num">3</span>
                            <span class="level-name">–°—Ä–µ–¥–Ω–∏–π</span>
                            <span class="level-elo">~1500</span>
                        </button>
                        <button class="level-btn" data-level="4">
                            <span class="level-num">4</span>
                            <span class="level-name">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</span>
                            <span class="level-elo">~1800</span>
                        </button>
                        <button class="level-btn" data-level="5">
                            <span class="level-num">5</span>
                            <span class="level-name">–≠–∫—Å–ø–µ—Ä—Ç</span>
                            <span class="level-elo">~2100</span>
                        </button>
                    </div>
                </div>

                <button id="btnStartGame" class="btn btn-primary btn-large">
                    ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –ò–≥—Ä—É
                </button>
            </div>

            <!-- Game Panel (hidden initially) -->
            <div id="gamePanel" class="panel game-panel hidden">
                <!-- Info Bar -->
                <div class="info-bar">
                    <div class="player-info player-black">
                        <div class="player-label">‚ö´ “ö–ê–†–ê (AI)</div>
                        <div class="player-elo" id="aiElo">ELO: 1500</div>
                    </div>
                    <div class="game-status">
                        <div class="turn-indicator" id="turnIndicator">–í–∞—à –•–æ–¥</div>
                        <div class="move-counter" id="moveCounter">–•–æ–¥: 0</div>
                    </div>
                    <div class="player-info player-white">
                        <div class="player-label">‚ö™ –ê“ö (–í—ã)</div>
                        <div class="player-elo" id="playerElo">ELO: 1500</div>
                    </div>
                </div>

                <!-- Board Container - Only Classic View -->
                <div class="board-wrapper classic-active">
                    <canvas id="classicBoard" class="board-classic" width="900" height="450"></canvas>
                </div>

                <!-- Last Move Info -->
                <div class="last-move" id="lastMove">
                    –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ö–æ–¥: -
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button id="btnUndo" class="btn btn-secondary" disabled>‚Ü©Ô∏è –û—Ç–º–µ–Ω–∏—Ç—å</button>
                    <button id="btnNewGame" class="btn btn-secondary">üîÑ –ù–æ–≤–∞—è –ò–≥—Ä–∞</button>
                    <button id="btnResign" class="btn btn-danger">üè≥Ô∏è –°–¥–∞—Ç—å—Å—è</button>
                </div>
            </div>

            <!-- Side Panel -->
            <aside class="side-panel">
                <!-- Move History -->
                <div class="panel history-panel">
                    <h3>üìú –ò—Å—Ç–æ—Ä–∏—è –•–æ–¥–æ–≤</h3>
                    <div class="move-list" id="moveList">
                        <!-- Moves will be added here -->
                    </div>
                </div>

                <!-- Gemini Analysis Panel -->
                <div class="panel analysis-panel">
                    <h3>ü§ñ AI –ê–Ω–∞–ª–∏–∑</h3>
                    <div class="analysis-controls">
                        <button id="btnAnalyze" class="btn btn-small">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button id="btnSuggest" class="btn btn-small">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –•–æ–¥</button>
                    </div>
                    <div class="analysis-content" id="analysisContent">
                        <p class="placeholder">–ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç Gemini.</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- ============================================ -->
        <!-- REPLAYS MODE -->
        <!-- ============================================ -->
        <main class="main-content hidden" id="replaysMode">
            <!-- Replay Selector -->
            <div class="panel replay-selector-panel">
                <h2>üìº –ó–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –ü–∞—Ä—Ç–∏–∏ (Gym Simulations)</h2>
                <div class="replay-list" id="replayList">
                    <p class="placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–∞—Ä—Ç–∏–π...</p>
                </div>
            </div>

            <!-- Replay Viewer -->
            <div id="replayViewer" class="panel replay-viewer hidden">
                <!-- Replay Info Bar -->
                <div class="info-bar">
                    <div class="player-info player-black">
                        <div class="player-label">‚ö´ “ö–ê–†–ê (Black)</div>
                        <div class="player-elo" id="replayBlackScore">–ö–∞–∑–∞–Ω: 0</div>
                    </div>
                    <div class="game-status">
                        <div class="turn-indicator" id="replayCurrentPlayer">WHITE</div>
                        <div class="move-counter" id="replayStepCounter">–®–∞–≥: 0 / 0</div>
                    </div>
                    <div class="player-info player-white">
                        <div class="player-label">‚ö™ –ê“ö (White)</div>
                        <div class="player-elo" id="replayWhiteScore">–ö–∞–∑–∞–Ω: 0</div>
                    </div>
                </div>

                <!-- Replay Board -->
                <div class="board-wrapper classic-active">
                    <canvas id="replayBoard" class="board-classic" width="900" height="450"></canvas>
                </div>

                <!-- Replay Progress Bar -->
                <div class="replay-progress">
                    <div class="progress-bar" id="replayProgressBar">
                        <div class="progress-fill" id="replayProgressFill"></div>
                    </div>
                </div>

                <!-- Replay Controls -->
                <div class="replay-controls">
                    <button id="btnReplayFirst" class="btn btn-secondary">‚èÆ –ù–∞—á–∞–ª–æ</button>
                    <button id="btnReplayPrev" class="btn btn-secondary">‚è™ –ù–∞–∑–∞–¥</button>
                    <button id="btnReplayPlay" class="btn btn-primary">‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏</button>
                    <button id="btnReplayNext" class="btn btn-secondary">‚è© –í–ø–µ—Ä—ë–¥</button>
                    <button id="btnReplayLast" class="btn btn-secondary">‚è≠ –ö–æ–Ω–µ—Ü</button>
                </div>

                <!-- Speed Control -->
                <div class="speed-control">
                    <label>–°–∫–æ—Ä–æ—Å—Ç—å:</label>
                    <input type="range" id="replaySpeed" min="100" max="2000" value="500">
                    <span id="replaySpeedValue">500ms</span>
                </div>

                <!-- Winner Banner -->
                <div class="winner-banner hidden" id="replayWinnerBanner">
                    üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: WHITE (83:57) üèÜ
                </div>
            </div>

            <!-- Replay Side Panel -->
            <aside class="side-panel">
                <div class="panel">
                    <h3>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ü–∞—Ä—Ç–∏–∏</h3>
                    <div id="replayInfo" class="replay-info">
                        <p class="placeholder">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—Ç–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>
                    </div>
                </div>
                <div class="panel">
                    <h3>üîç –ü–æ—Å–ª–µ–¥–Ω–µ–µ –î–µ–π—Å—Ç–≤–∏–µ</h3>
                    <div id="replayLastAction" class="last-action-info">
                        -
                    </div>
                </div>
            </aside>
        </main>

        <!-- Game Over Modal -->
        <div id="gameOverModal" class="modal hidden">
            <div class="modal-content">
                <h2 id="gameOverTitle">üéâ –ò–≥—Ä–∞ –û–∫–æ–Ω—á–µ–Ω–∞!</h2>
                <div class="game-result" id="gameResult">
                    <p class="winner-text" id="winnerText">–í—ã –ü–æ–±–µ–¥–∏–ª–∏!</p>
                    <p class="score-text" id="scoreText">–°—á—ë—Ç: 82 - 80</p>
                    <p class="elo-change" id="eloChangeText">ELO: +15</p>
                </div>
                <div class="modal-buttons">
                    <button id="btnPlayAgain" class="btn btn-primary">–ò–≥—Ä–∞—Ç—å –°–Ω–æ–≤–∞</button>
                    <button id="btnCloseModal" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- AI Thinking Indicator -->
        <div id="aiThinking" class="thinking-indicator hidden">
            <div class="thinking-spinner"></div>
            <span>–ò–ò –¥—É–º–∞–µ—Ç...</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/board-classic.js"></script>
    <script src="js/app.js"></script>
    <script src="js/replay.js"></script>
</body>
</html>
